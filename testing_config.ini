# =====================================================================
# grblHAL RTCP Testing - Configuracion del Simulador
# =====================================================================
#
# Este archivo define TODOS los settings de grblHAL que se aplican
# al inicio del testing. El script testing.py lee este archivo y
# envia cada linea como comando al simulador.
#
# Formato:
#   $<numero>=<valor>    Setting de grblHAL
#   # comentario         Linea ignorada
#   [SECCION]            Encabezado visual (ignorado)
#   G.../M...            Comando Gcode inicial
#
# Para cambiar la configuracion de los tests, edita este archivo
# en lugar de modificar testing.py.
#
# Referencia de settings: https://github.com/grblHAL/core/wiki/$$-settings
# =====================================================================

# ----- Limites / Seguridad -----
$20=0                  # Soft limits: 0=OFF, 1=ON
$21=0                  # Hard limits: 0=OFF, 1=ON

# ----- Velocidad maxima (mm/min) por eje -----
$110=50000             # X max rate
$111=50000             # Y max rate
$112=50000             # Z max rate
$113=50000             # A max rate
$114=50000             # B max rate
$115=50000             # C max rate

# ----- Aceleracion (mm/sec^2) por eje -----
$120=5000              # X aceleracion
$121=5000              # Y aceleracion
$122=5000              # Z aceleracion
$123=5000              # A aceleracion
$124=5000              # B aceleracion
$125=5000              # C aceleracion

# ----- Travel maximo (mm) por eje -----
# Nota: grblHAL usa valores positivos aqui.
# El rango real es [-valor, 0] si homing esta configurado,
# o [-valor, +valor] si no hay homing.
$130=500               # X max travel
$131=500               # Y max travel
$132=500               # Z max travel
$133=500               # A max travel (grados)
$134=500               # B max travel (grados)
$135=500               # C max travel (grados)

# ----- Pasos por mm -----
# (usar defaults del simulador, descomentar para override)
# $100=250             # X steps/mm
# $101=250             # Y steps/mm
# $102=250             # Z steps/mm
# $103=250             # A steps/deg
# $104=250             # B steps/deg
# $105=250             # C steps/deg

# ----- RTCP: Pivot Point -----
$640=0                 # Pivot X (mm)
$641=0                 # Pivot Y (mm)
$642=210               # Pivot Z (mm) - distancia cabezal a punto de rotacion

# ----- RTCP: Offsets de eje -----
$643=0                 # Offset Y (mm) - desalineacion lateral
$644=0                 # Offset Z (mm) - desalineacion vertical

# ----- Acabados y Suavidad (RTCP) -----
# (NOTA: Algunos de estos valores requieren cambios en grbl/config.h y recompilar el firmware)
# COMPILACION (config.h):
#   #define ENABLE_JERK_ACCELERATION 1
#   #define ACCELERATION_TICKS_PER_SECOND 150
#   #define SEGMENT_BUFFER_SIZE 15
#   #define DEFAULT_ARC_TOLERANCE 0.001f

# --- Configuraciones en caliente (valores recomendados) ---
# $8=0.005               # Junction Deviation (Menor valor frena mas en curvas cerradas)
$398=200               # Planner Buffer Blocks (Lookahead, mas significa union mas suave)

# --- Jerk Limits (mm/sec^3) ---
# (Solo si ENABLE_JERK_ACCELERATION esta activo en config.h)
$220=50                # X Jerk
$221=50                # Y Jerk
$222=50                # Z Jerk
$223=50                # A Jerk
$224=50                # B Jerk
$225=50                # C Jerk

# ----- Estado inicial Gcode -----
# G90                    # Modo absoluto
# G21                    # Unidades milimetros
